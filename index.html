<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sfinder Simple Test</title>
    <script src="https://cjrtnc.leaningtech.com/3.0/cj3loader.js"></script>
</head>
<body>
    <h1>Sfinder Test</h1>
    <button onclick="testCheerpJ()">Test CheerpJ</button>
    <button onclick="testJava()">Test Java</button>
    <button onclick="runSfinder()">Run Sfinder</button>
    <pre id="output"></pre>
    
    <script>
        const output = document.getElementById('output');
        
        function log(msg) {
            output.textContent += msg + '\n';
            console.log(msg);
        }
        
        async function testCheerpJ() {
            log('Testing CheerpJ...');
            try {
                await cheerpjInit();
                log('CheerpJ init OK');
                
                // 簡単なJavaコードを実行
                const System = await cheerpjRunLibrary("java.lang.System");
                const version = await System.getProperty("java.version");
                log(`Java version: ${version}`);
                
                const osName = await System.getProperty("os.name");
                log(`OS: ${osName}`);
                
            } catch (e) {
                log(`Error: ${e}`);
            }
        }
        
        async function testJava() {
            log('\nTesting Java execution...');
            try {
                // 簡単なJavaプログラムを実行
                const exitCode = await cheerpjRunMain("java.lang.System", "exit", 0);
                log(`Exit code: ${exitCode}`);
            } catch (e) {
                log(`Error: ${e}`);
            }
        }
        
        async function runSfinder() {
            log('\nRunning Sfinder...');
            try {
                // まずhelpコマンドを試す
                const exitCode = await cheerpjRunJar("sfinder.jar", "java -jar sinder.jar percent --tetfu v115@9gwhi0DeR4whg0RpCeR4wwwhglRpBeBtxwwhilCeBt?wwJeAgWBAUAAAA --patterns *p4");
                log(`Sfinder help exit code: ${exitCode}`);
            } catch (e) {
                log(`Sfinder error: ${e}`);
            }
        }
    </script>
</body>
</html>
